{% extends 'main/layout.html' %}
{% block title %}Управление заказами{% endblock %}

{% block content %}
<div class="container mt-5">
  <h2> Управление заказами</h2>
  <table class="table table-bordered mt-3">
    <thead>
      <tr>
        <th>ID</th>
        <th>Пользователь</th>
        <th>Создан</th>
        <th>Статус</th>
        <th>Действия</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
      <tr>
        <td>{{ order.id }}</td>
        <td>{{ order.user.username }}</td>
        <td>{{ order.created_at }}</td>
        <td>{{ order.status }}</td>
        <td>
          <form method="post" style="display: inline;">
            {% csrf_token %}
            <input type="hidden" name="order_id" value="{{ order.id }}">
            <button name="action" value="delete" class="btn btn-danger btn-sm" onclick="return confirm('Удалить заказ?')">Удалить</button>
            <button name="action" value="mark_completed" class="btn btn-success btn-sm">Завершить</button>
          </form>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5">Нет заказов</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
